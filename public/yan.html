<html>
<head>
    <style type="text/css">
        .code{

            font-family:Arial,宋体;
            font-style:italic;
            color:green;
            border:0;
            padding:2px 3px;
            letter-spacing:3px;
            font-weight:bolder;
        }
        .unchanged {
            border:0;
        }
    </style>
    <script language="javascript" type="text/javascript">
        var code ; //在全局 定义验证码
        function createCode(){
            code = new Array();
            var codeLength = 4;//验证码的长度
            var checkCode = document.getElementById("checkCode");
            checkCode.value = "";

            var selectChar = new Array(2,3,4,5,6,7,8,9,'A','B','C','D','E','F','G','H','J','K','L','M','N','P','Q','R','S','T','U','V','W','X','Y','Z');

            for(var i=0;i<codeLength;i++) {
                var charIndex = Math.floor(Math.random()*32);
                code +=selectChar[charIndex];
            }
            if(code.length != codeLength){
                createCode();
            }
            checkCode.value = code;
        }

        function validate () {
            var inputCode = document.getElementById("input1").value.toUpperCase();

            if(inputCode.length <=0) {
                alert("请输入验证码！");
                return false;
            }
            else if(inputCode != code ){
                alert("验证码输入错误！");
                createCode();
                return false;
            }
            else {
                alert("成功！");
                return true;
            }
        }
    </script>
    <meta http-equiv="Content-Type" content="text/html; charset=gb2312"></head>
<body onLoad="createCode();">

<input type="text" id="input1" />
<input type="button" id="checkCode" class="code" style="width:60px" onClick="createCode()" /> <a href="#" onClick="createCode()">看不清楚</a>
<input id="Button1" onClick="validate();" type="button" value="确定" />
<script></script>
</body>
</html>



CREATE DATABASE IF NOT EXISTS nodesample CHARACTER SET UTF8;

USE nodesample;

SET FOREIGN_KEY_CHECKS=0;

DROP TABLE IF EXISTS `gouwuche4`;
CREATE TABLE `gouwuche4` (
`Id` int(11) NOT NULL AUTO_INCREMENT COMMENT '主键',
`goodsName` varchar(64) NOT NULL COMMENT '商品名',
`goodsjiage` varchar(64) NOT NULL COMMENT '商品价格',
`goodstu` varchar(64) NOT NULL COMMENT '商品图',
PRIMARY KEY (`Id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='商品信息表';



INSERT INTO gouwuche2(goodsName,goodsjiage,goodsjieshao,goodscolor,goodsbianhao,goodstu)
VALUES('naifenxq3','299','新贝 NCVI 2档可调宽口奶瓶手动吸奶器8610','米白','商品编号：1176540','images/nai2.png');







INSERT INTO gouwuches(goodsName,goodsjiage,goodsjieshao,goodscolor,goodsbianhao,goodstu)
VALUES('naifenxq2','299','新贝 NCVI 2档可调宽口奶瓶手动吸奶器8610','米白','商品编号：1176540','images/nai1.png');
INSERT INTO gouwuches(goodsName,goodsjiage,goodsjieshao,goodscolor,goodsbianhao,goodstu)
VALUES('naifenxq3','299','新贝 NCVI 2档可调宽口奶瓶手动吸奶器8610','米白','商品编号：1176540','images/nai2.png');





















INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiaomoren','299','images/tuche2.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiaomoren','299','images/tuche2.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiaomoren','299','images/tuche2.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiaomoren','299','images/tuche2.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiaomoren','299','images/tuche2.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiaomoren','299','images/tuche2.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiaomoren','299','images/tuche2.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiaomoren','299','images/tuche2.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiaomoren','299','images/tuche2.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiaomoren','299','images/tuche2.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiaomoren','299','images/tuche2.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiaomoren','299','images/tuche2.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiaomoren','299','images/tuche2.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiaomoren','299','images/tuche2.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiaomoren','299','images/tuche2.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiaomoren','299','images/tuche2.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiaomoren','299','images/tuche2.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiaomoren','299','images/tuche2.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiaomoren','299','images/tuche2.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiaomoren','299','images/tuche2.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiaomoren','299','images/tuche2.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiaomoren','299','images/tuche2.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiaomoren','299','images/tuche2.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiaomoren','299','images/tuche2.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiaomoren','299','images/tuche2.png');



INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiao2moren','299','images/nai1.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiao2moren','299','images/nai1.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiao2moren','299','images/nai1.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiao2moren','299','images/nai1.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiao2moren','299','images/nai1.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiao2moren','299','images/nai1.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiao2moren','299','images/nai1.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiao2moren','299','images/nai1.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiao2moren','299','images/nai1.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiao2moren','299','images/nai1.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiao2moren','299','images/nai1.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiao2moren','299','images/nai1.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiao2moren','299','images/nai1.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiao2moren','299','images/nai1.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiao2moren','299','images/nai1.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiao2moren','299','images/nai1.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiao2moren','299','images/nai1.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiao2moren','299','images/nai1.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiao2moren','299','images/nai1.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiao2moren','299','images/nai1.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiao2moren','299','images/nai1.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiao2moren','299','images/nai1.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiao2moren','299','images/nai1.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiao2moren','299','images/nai1.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('liebiao2moren','299','images/nai1.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('gou1','299','images/tuche2.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('gou1','299','images/tuche2.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('gou1','299','images/tuche2.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('gou1','299','images/tuche2.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('gou1','299','images/tuche2.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('gou1','299','images/tuche2.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('gou1','299','images/tuche2.png');
INSERT INTO goods(goodsName,goodsjiage,goodstu)VALUES('gou1','299','images/tuche2.png');




function jia(name, callback) {
var sqlCmdjia = 'SELECT * from goods where goodsname= "' + name + '"';
console.log(sqlCmdjia);
connection.query(sqlCmdjia, function (error, rows) {
//console.log(rows);
for (var i = 0; i < rows.length; i++) {
connection.query('insert into gouwuche4 (goodsName,goodsjiage,goodstu)' +
' values ("' + rows[0].goodsName + '","' + rows[0].goodsjiage + '","' + rows[0].goodstu + '")', function (error, rows) {

});
}
});
var sqlCmddiaochu = 'SELECT * from gouwuche4 where goodsname= "' + name + '"';
connection.query(sqlCmddiaochu
, function (error, rows) {
console.log(rows)
callback(rows);
});
}

jia(req.body.goodsname, function (result) {
res.contentType('json');//返回的数据类型
res.send(JSON.stringify({result: result}));//给客户端返回一个json格式的数据
//console.log(result);
res.end();
})
})






